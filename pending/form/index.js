(()=>{"use strict";var t={6268:function(t,e,i){var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return s(e,t),e},a=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(s,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function o(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=o(i(5502)),u=i(8517),d=n(i(1683)),h=o(i(438)),f=i(3276),c=/^[^:,]+:([^:,]+)+$/;class p extends l.default{constructor(t,e={}){super(),this.rules=t,this.options={},this.translator=new h.default,this.translate=t=>this.translator.translate(t),this.initData={},this.data={},this.init({}),this.options=(0,u.assign)({shouldFailFast:!0,shouldValidate:!0,shouldValidateChangesOnly:!1},e),this.options.validators=(0,u.assign)({},d.default,(0,u.get)(e,"validators",null))}init(t){return this.initData=(0,u.assign)({},t),this.data=(0,u.assign)({},t),this}validate(){return a(this,void 0,void 0,(function*(){const t=this.opt("shouldValidateChangesOnly")?Object.keys(this.getChanges()):Object.keys(this.data),e=t.map((t=>a(this,void 0,void 0,(function*(){return yield this.validateField(t)})))),i=(0,u.zipObject)(t,yield Promise.all(e));return yield Promise.all(e).then((()=>(this.emit("error",i,this),i)))}))}validateField(t){var e;return a(this,void 0,void 0,(function*(){const i=this.get(t),r=[];let s=null!==(e=this.rules[t])&&void 0!==e?e:[];if((0,f.is)("string",s)&&(s=s.split("|")),!s.includes(d.REQUIRED_RULE)&&!d.default.required(i))return r;for(let e=0;e<s.length;e++){const{fn:n,name:a,params:o}=this.getRule(s[e]);try{const e=n(i);let s;if(s=e.then instanceof Function?yield e:e,!s&&(r.push((0,u.upperFirst)(this.getErrorMessage(t,a,o))),this.opt("shouldFailFast")))break}catch(t){if(r.push((0,u.upperFirst)(this.translate((0,u.get)(t,"message")))),this.opt("shouldFailFast"))break}}return r}))}merge(t){const e=(0,f.diff)(t,this.data,!0);return Object.keys(e).length>0&&(this.data=(0,u.assign)({},this.data,e),this.emit("change",e,this)),this}get(t){return(0,u.get)(this.data,t)}getChanges(){return(0,f.diff)(this.data,this.initData)}opt(t,e){var i;return(0,u.get)(this.options,t,null!==(i=this.options[t])&&void 0!==i?i:e)}getRule(t){let e,i=(0,f.is)("string",t)?t:t.name,r=[];if((0,f.is)("string",t)){const s=t;if(c.test(s)&&([i,...r]=s.split(/[:,]/)),!(0,f.is)("function",this.opt(`validators.${i}`)))throw Error(`Validator ${i} is not defined`);e=this.opt(`validators.${i}`).bind(this),r.length>0&&(e=t=>a(this,void 0,void 0,(function*(){return yield e.apply(this,[t,...r])})))}else{if(!(0,f.is)("function",t))throw Error("Invalid validator function");e=t}return{fn:e,name:i,params:r}}getErrorMessage(t,e,i){const r=this.translate([`form.errors.${e}`,"form.errors.invalid"]),s=this.get(t),n=[this.translate(t),s,this.translate([`form.rules.${e}`,e]),...i];return""!==r?r.replace(/%\d+/g,(t=>{var e;return null!==(e=n[t.replace("%","")])&&void 0!==e?e:t})):""}}e.default=p},438:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_LANG=void 0;const s=r(i(5404)),n=i(8517),a=i(3276);e.DEFAULT_LANG="en",e.default=class{constructor(){this.lang=e.DEFAULT_LANG,this.resources={},this.load(s.default)}setLang(t){this.lang=t}load(t){const{lang:e,messages:i}=t;this.resources[e]=i}translate(t){if((0,a.is)("string",t))return(0,n.get)(this.resources,`${this.lang}.${t}`,t);if((0,a.is)("array",t)){if(0===t.length)throw TypeError("No texts provided for translations");const e=t[t.length-1],i=t.find((t=>this.has(t)));return void 0!==i?this.translate(i):e}throw TypeError("Only supports translations for string or a array of fallback texts")}has(t){return(0,n.has)(this.resources,`${this.lang}.${t}`)}}},6806:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(6268);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(s).default}})},5404:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={lang:"en",messages:{form:{errors:{required:"Please provide %0",isEmail:"%0 should be valid email address",maxLength:"%0 shouldn't be longer than %3 characters",minLength:"%0 should be %3 characters or longer",date:"%0 has invalid date format",time:"%0 has invalid time format",invalid:"Invalid"}}}}},3276:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateField=e.diff=e.is=void 0;const s=r(i(8645));e.is=(t,e)=>t===(0,s.default)(e),e.diff=(t,e,i=!1)=>{const r=Object.keys(t),s=Object.keys(e),n={};return r.forEach((i=>{t[i]!==e[i]&&(n[i]=t[i])})),!i&&s.forEach((t=>{r.includes(t)||(n[t]="")})),n},e.updateField=(t,e,i="")=>{if(!e)throw Error("Input or event should be provided");const r=e.target instanceof Element?e.target:e,s=r.type,n=i||r.name||r.getAttribute instanceof Function&&"data-field-name"||r.data instanceof Function&&r.data("field-name");if(!n)throw Error("No field name found");if("radio"===s&&!r.checked)return t;let a;return a="checkbox"===s?Boolean(r.checked):r.value,Object.assign({},t,{[n]:a})}},1683:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.REQUIRED_RULE=e.emptyValues=void 0;const s=r(i(2530)),n=r(i(7379)),a=r(i(6308)),o=i(3276);e.emptyValues=["",null,void 0],e.REQUIRED_RULE="required";const l=/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/,u={[e.REQUIRED_RULE]:t=>!e.emptyValues.includes(t),maxLength:(t,e)=>!t||t.length<=e,minLength:(t,e)=>Boolean(t)&&t.length>=e,in:(t,...e)=>(0,s.default)(t,e),date:(t,e="YYYY/MM/DD")=>(0,a.default)(t,{format:e}),time:t=>(0,o.is)("string",t)&&null!==t.match(l)},d=Object.assign({isEmail:n.default},u);e.default=d},5502:t=>{t.exports=require("eventemitter3")},8645:t=>{t.exports=require("kind-of")},8517:t=>{t.exports=require("lodash-es")},6308:t=>{t.exports=require("validator/lib/isDate")},7379:t=>{t.exports=require("validator/lib/isEmail")},2530:t=>{t.exports=require("validator/lib/isIn")}},e={},i=function i(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}(6806);module.exports=i})();